# Django проект, который при вызове "/get-current-usd/" возвращает актуальный курс доллара к рублю в формате JSON и 10 последних запросов курсов

## Разбиение на Подзадачи:

1. Создание проекта и приложения Django

2. Определение модели для хранения курсов валют

3. Реализация логики запросов к внешнему API ([exchangerate-api](https://www.exchangerate-api.com/.))

4. Добавление проверки временного интервала (пауза не менее 10 секунд)

5. Создание эндпоинта с возвратом JSON

6. Тестирование и обработка ошибок

# Инструкция по запуску проекта
* Скачать исходный код проекта: `git clone https://github.com/Jaguar56/Test_project.git`
* Перейти в папку с проектом: `cd Test_project/`
* Установить виртуальное окружение: `python -m pip install --upgrade pip && pip install virtualenv`
* Создать виртуальное окружение `python -m virtualenv django_venv`
* Активировать виртуальное окружение:
1. Для OS Windows  `django_venv\Scripts\activate`
2. Для OS Linux `source django_venv/bin/activate`
* Установить зависимости: `pip install -r requirements.txt`
* Запустить сервер `python manage.py runserver`

## Использование

После запуска перейти по ссылке
URL: [http://127.0.0.1:8000/get-current-usd/](http://127.0.0.1:8000/get-current-usd/).

* Пример ответа http://127.0.0.1:8000/get-current-usd/ в формате JSON:

\{
    current_conversion_rate_usd_to_rub: 86.8485,
    last_10_rate_usd_to_rub_requests: [
    [
    "86.8485",
    "2025-03-13T02:48:05.677Z"
    ],
    [
    "86.8485",
    "2025-03-13T02:23:19.607Z"
    ],
    [
    "86.8485",
    "2025-03-13T01:41:53.140Z"
    ],
    [
    "86.8485",
    "2025-03-13T01:36:47.452Z"
    ],
    [
    "86.8485",
    "2025-03-13T01:36:19.361Z"
    ],
    [
    "86.8485",
    "2025-03-13T01:35:44.582Z"
    ],
    [
    "97.6552",
    "2024-11-02T12:01:32.472Z"
    ],
    [
    "97.6552",
    "2024-11-02T12:01:11.188Z"
    ],
    [
    "97.6552",
    "2024-11-02T12:01:05.216Z"
    ],
    [
    "97.6552",
    "2024-11-02T12:00:49.005Z"
    ]
    ]
\}

## Вопросы
К продакт-менеджеру:

1. Как обрабатывать ситуации, когда внешнее API недоступно длительное время?

2. Нужно ли ограничивать историю запросов (например, хранить только 100 последних)?

3. Требуется ли добавить параметры в запрос (например, выбор валюты)?

К TL:

1. Стоит ли вынести запросы к API в асинхронные задачи?

2. Как лучше тестировать код, мокая внешние API?

3. Нужно ли добавить кеширование для снижения нагрузки на БД?

## Тайминги

|Компонент	                 |Первичная оценка	      |Фактическое время|
|----------------------------|------------------------|-----------------|
|Настройка проекта	         |30 мин	              |20 мин           |
|Модель и миграции	         |20 мин	              |15 мин           |
|Логика запросов к API	     |2 часа	              |3 часа           |
|Эндпоинт и сериализация	 |1 час                   |1 час            |
|Тестирование	             |1 час	                  | 1.5 часа        |
|Итого:	                     |5 часов	              |6.5 часов        |
